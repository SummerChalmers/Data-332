library(tidytext)
library(textdata)
library(ggplot2)
library(dplyr)
library(stringr)
library(tidyr)
library(wordcloud)
library(tidyr)
library(tidyverse)
library(syuzhet)
library(bit)

setwd('C:/Users/smc91/OneDrive/Desktop/RStudioProj')
df <- read.csv('Consumer_Complaints.csv')

get_sentiments("afinn")
get_sentiments("bing")
get_sentiments("nrc")

#sentiment analysis
no_blanks <- filter (df, df$Consumer.complaint.narrative != '')
# now take this and get it to each word is its own cell
no_blanks <- no_blanks %>%
  mutate(Consumer.complaint.narrative = str_split(Consumer.complaint.narrative, "\\s+"))
no_blanks <- unnest(no_blanks, Consumer.complaint.narrative)
print(no_blanks)

nrc_negative <- get_sentiments("nrc") %>% 
  filter(sentiment == "negative")
no_blanks %>%
  filter(column == 'Consumer.complaint.narrative)
  inner_join(nrc_negative)%>%
  count(word, sort = TRUE)
